<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	template="/common/commonLayout.xhtml">
	<ui:param name="hideLeftContent" value="true" />
	<ui:define name="content">
		<h:form id="userJobManagementForm">
			<p:messages />
			<p:commandButton value="New Post"
				action="#{UserManageBean.processNewPost}" />
			Browse jobs by category  <p:selectOneMenu id="category"
				value="#{UserManageBean.selectedJobCategory}" style="width:250px;top:10px;left:10px;">
				<p:ajax listener="#{UserManageBean.onJobCategoryChange}" update="userJobManagementForm" />
				<f:selectItem itemLabel="Select Job Category" itemValue=""
					noSelectionOption="true" />
				<f:selectItems value="#{HomeBean.jobCategoryList}" var="categoryLst" itemValue="#{categoryLst.jobCategoryId}" itemLabel="#{categoryLst.jobCategoryName}"/>
			</p:selectOneMenu>
			<h2>Submitted Jobs</h2>
			<p:dataTable var="job" value="#{UserManageBean.jobList}"
				paginator="true" paginatorAlwaysVisible="false" rows="8"
				id="jobsTable"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="8,16,24" class="table table-striped">

				<p:column headerText="Job Type" style="width:80px;">
					<h:panelGroup layout="block"
						rendered="#{job.jobType == 'Full Time'}">
						<div class="jobTypeFull">
							<h:outputText value="#{job.jobType}" />
						</div>
					</h:panelGroup>
					<h:panelGroup layout="block"
						rendered="#{job.jobType == 'Part Time'}">
						<div class="jobTypePart">
							<h:outputText value="#{job.jobType}" />
						</div>
					</h:panelGroup>
				</p:column>
				<p:column headerText="Title" style="width:500px;">
					<div class="title">
						<h:commandLink action="#{UserManageBean.processDetail}"
							value="#{job.postTitle}">
							<f:setPropertyActionListener
								target="#{UserManageBean.selectedJob}" value="#{job}" />
						</h:commandLink>
					</div>
					<span>Company - <h:outputText value="#{job.companyName}" /></span>
				</p:column>
				<p:column headerText="Location" style="width:100px;">
					<h:outputText value="#{job.jobLocation}" />
				</p:column>
				<p:column headerText="Post Date" style="width:80px;">
					<h:outputText value="#{job.createDt}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>
				<p:column headerText="Update Date" style="width:80px;">
					<h:outputText value="#{job.updateDt}">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</h:outputText>
				</p:column>
				<p:column headerText="" style="width:80px;">
					<p:commandButton value="Edit" type="submit"
						action="#{UserManageBean.processEditJob}" icon="ui-icon-pencil">
						<f:setPropertyActionListener
							target="#{UserManageBean.selectedJob}" value="#{job}" />
					</p:commandButton>
				</p:column>
				<p:column headerText="" style="width:85px;">
					<p:commandButton value="Delete"
						update=":userJobManagementForm:deleteJobData"
						oncomplete="PF('deleteDialog').show()" title="Confirm Delete"
						icon="ui-icon-trash">
						<f:setPropertyActionListener
							target="#{UserManageBean.selectedJob}" value="#{job}" />
					</p:commandButton>
				</p:column>
			</p:dataTable>
			<p></p>
			<p:dialog id="dlg" header="Delete Confirm" widgetVar="deleteDialog"
				modal="false" dynamic="true" appendToBody="false" showEffect="blind"
				hideEffect="explode" resizable="false">
				<h:panelGrid columns="3" id="deleteJobData">
		   Are you sure want to delete the post of <h:outputText
						value="#{UserManageBean.selectedJob.postTitle}" /> ?
		</h:panelGrid>
				<p></p>
				<p:commandButton value="confirm" update="userJobManagementForm"
					action="#{UserManageBean.processDeleteJob}"
					oncomplete="PF('deleteDialog').hide()" />
				<p:commandButton value="cancel" onclick="PF('deleteDialog').hide()" />
			</p:dialog>
		</h:form>
	</ui:define>
</ui:composition>